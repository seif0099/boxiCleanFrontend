/* ===========================
   BoxiClean â€” Client Dashboard (Refined)
   Drop-in replacement (keeps same class names)
   =========================== */

/* ---------- Design Tokens ---------- */
:root {
  /* palette */
  --bg: #f7f9fc;
  --bg-soft: #ffffff;
  --ink: #0f172a;            /* slate-900 */
  --ink-muted: #475569;      /* slate-600 */
  --ink-soft: #64748b;       /* slate-500 */

  --primary: #2563eb;        /* blue-600 */
  --primary-700: #1d4ed8;    /* blue-700 */
  --primary-800: #1e40af;    /* blue-800 */

  --success: #16a34a;        /* green-600 */
  --danger: #ef4444;         /* red-500 */
  --warning: #f59e0b;        /* amber-500 */
  --info: #3b82f6;           /* blue-500 */

  /* surfaces & lines */
  --card: #ffffff;
  --line: #e5e7eb;           /* gray-200 */
  --chip: #f1f5f9;           /* slate-100 */

  /* effects */
  --radius-lg: 18px;
  --radius-xl: 22px;
  --shadow-sm: 0 4px 14px rgba(2, 6, 23, 0.06);
  --shadow-md: 0 10px 24px rgba(2, 6, 23, 0.08);
  --shadow-lg: 0 18px 40px rgba(2, 6, 23, 0.10);
  --ring: 0 0 0 3px rgba(37, 99, 235, 0.18);

  /* typography & spacing */
  --font: 'Inter', ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  --h1: clamp(2rem, 1.4rem + 2vw, 3rem);
  --h2: clamp(1.25rem, 1.1rem + 0.8vw, 1.8rem);
  --p: 1.05rem;
  --space-1: .5rem;
  --space-2: .75rem;
  --space-3: 1rem;
  --space-4: 1.25rem;
  --space-5: 1.5rem;
  --space-6: 2rem;
  --space-7: 2.5rem;
  --space-8: 3rem;

  /* forms */
  --input-bg: #f8fafc;
  --input-border: #cbd5e1;
  --input-border-focus: #93c5fd;
}

/* Optional: dark mode hook (wrap your app in .dark to enable) */
.dark {
  --bg: #0b1220;
  --bg-soft: #0f172a;
  --ink: #e5edff;
  --ink-muted: #cdd5e7;
  --ink-soft: #9fb0d4;

  --card: #0f172a;
  --line: #1e293b;
  --chip: #0b1326;

  --shadow-sm: 0 4px 14px rgba(0,0,0,.35);
  --shadow-md: 0 10px 24px rgba(0,0,0,.4);
  --shadow-lg: 0 18px 40px rgba(0,0,0,.45);

  --input-bg: #0b1326;
  --input-border: #1f2a44;
  --input-border-focus: #355dbe;
}

/* Motion reduction */
@media (prefers-reduced-motion: reduce) {
  * { animation: none !important; transition: none !important; }
}

/* ---------- Page Shell ---------- */
.client-dashboard {
  font-family: var(--font);
  background:
    radial-gradient(60% 60% at 10% 0%, rgba(37, 99, 235, 0.08) 0%, transparent 60%),
    radial-gradient(60% 60% at 100% 20%, rgba(59, 130, 246, 0.08) 0%, transparent 55%),
    var(--bg);
  color: var(--ink);
  min-height: 100vh;
  padding: var(--space-8) var(--space-3);
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--space-7);
  box-sizing: border-box;
}

/* ---------- Header ---------- */
.client-header {
  width: 100%;
  max-width: 860px;
  text-align: center;
  padding: 0 var(--space-3);
}

.client-header h1 {
  font-size: var(--h1);
  font-weight: 900;
  letter-spacing: .02em;
  color: var(--ink);
  margin: 0 0 var(--space-2);
}

.client-header p {
  font-size: var(--p);
  color: var(--ink-muted);
  max-width: 640px;
  margin: 0 auto var(--space-4);
  line-height: 1.55;
}

/* ---------- Primary Buttons ---------- */
.logout-btn,
.go-services-btn,
.select-reservation-btn,
.review-form button[type="submit"],
.cancel-review-btn,
.reopen-chat-btn {
  -webkit-tap-highlight-color: transparent;
  appearance: none;
  border: none;
  border-radius: var(--radius-lg);
  font-weight: 700;
  font-size: 1rem;
  padding: .9rem 1.4rem;
  cursor: pointer;
  transition: transform .15s ease, box-shadow .2s ease, background-color .2s ease, opacity .2s ease;
  user-select: none;
}

.logout-btn,
.go-services-btn,
.select-reservation-btn,
.review-form button[type="submit"],
.reopen-chat-btn {
  background: linear-gradient(180deg, var(--primary) 0%, var(--primary-700) 100%);
  color: #fff;
  box-shadow: var(--shadow-md);
}

.logout-btn:hover,
.go-services-btn:hover,
.select-reservation-btn:hover,
.review-form button[type="submit"]:hover,
.reopen-chat-btn:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-lg);
}

.logout-btn:focus-visible,
.go-services-btn:focus-visible,
.select-reservation-btn:focus-visible,
.review-form button[type="submit"]:focus-visible,
.cancel-review-btn:focus-visible,
.reopen-chat-btn:focus-visible {
  outline: none;
  box-shadow: var(--ring);
}

.logout-btn:active,
.go-services-btn:active,
.select-reservation-btn:active,
.review-form button[type="submit"]:active,
.reopen-chat-btn:active {
  transform: translateY(0);
}

/* Destructive */
.cancel-review-btn {
  background: linear-gradient(180deg, var(--danger) 0%, #b91c1c 100%);
  color: #fff;
  box-shadow: var(--shadow-md);
}

/* Primary CTA placement */
.go-services-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 1rem 1.6rem;
  margin: var(--space-6) auto 0;
}

/* ---------- Summary Cards ---------- */
.client-summary {
  display: grid;
  grid-template-columns: repeat(12, 1fr);
  gap: var(--space-4);
  width: 100%;
  max-width: 1100px;
  padding: 0 var(--space-3);
}

.card {
  grid-column: span 3;
  min-width: 240px;
  background: var(--card);
  border: 1px solid var(--line);
  border-radius: var(--radius-xl);
  padding: var(--space-6);
  text-align: center;
  color: var(--ink);
  box-shadow: var(--shadow-sm);
  transition: transform .18s ease, box-shadow .2s ease, border-color .2s ease;
  display: flex;
  flex-direction: column;
  justify-content: center;
  gap: .6rem;
}

.card:hover {
  transform: translateY(-4px);
  box-shadow: var(--shadow-md);
  border-color: rgba(37, 99, 235, .25);
}

.card h3 {
  font-size: 1.15rem;
  font-weight: 800;
  color: var(--primary-800);
  margin: 0;
}

.card p {
  font-size: 1.35rem;
  font-weight: 700;
  color: var(--ink);
  margin: 0;
}

/* ---------- Status Tags ---------- */
.status-tag {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: .5rem;
  font-size: .85rem;
  font-weight: 700;
  padding: .45rem .9rem;
  border-radius: 999px;
  background: var(--chip);
  color: var(--ink);
  border: 1px solid var(--line);
  box-shadow: var(--shadow-sm);
  text-transform: none; /* cleaner than capitalize here */
}

.status-tag.terminee   { background: rgba(22, 163, 74, .12); color: #166534; border-color: rgba(22,163,74,.22); }
.status-tag.annulee    { background: rgba(239, 68, 68, .12); color: #7f1d1d; border-color: rgba(239,68,68,.22); }
.status-tag.en_attente { background: rgba(245, 158, 11, .12); color: #7c3f10; border-color: rgba(245,158,11,.22); }
.status-tag.confirme   { background: rgba(37, 99, 235, .12); color: #1e3a8a; border-color: rgba(37,99,235,.22); }

/* Badge */
.badge-upcoming {
  display: inline-flex;
  align-items: center;
  gap: .4rem;
  background: rgba(245, 158, 11, .14);
  color: #7c3f10;
  font-weight: 700;
  font-size: .85rem;
  padding: .35rem .7rem;
  border-radius: .75rem;
  border: 1px solid rgba(245, 158, 11, .25);
}

/* ---------- Review Section ---------- */
.review-section {
  width: 100%;
  max-width: 900px;
  background: var(--card);
  border: 1px solid var(--line);
  border-radius: var(--radius-xl);
  padding: var(--space-6);
  color: var(--ink);
  box-shadow: var(--shadow-sm);
  display: flex;
  flex-direction: column;
  gap: var(--space-4);
}

.review-section h3 {
  font-size: var(--h2);
  font-weight: 900;
  color: var(--ink);
  margin: 0;
}

/* Reservation list + selection */
.reservation-selection p {
  font-weight: 600;
  color: var(--ink-muted);
  margin: 0 0 var(--space-3);
  font-size: 1rem;
}

.reservation-list {
  max-height: 320px;
  overflow-y: auto;
  display: grid;
  gap: var(--space-3);
  padding-right: .25rem;
  scroll-behavior: smooth;
}

/* scrollbar */
.reservation-list::-webkit-scrollbar { width: 8px; }
.reservation-list::-webkit-scrollbar-thumb {
  background: linear-gradient(180deg, var(--primary) 0%, var(--primary-700) 100%);
  border-radius: 999px;
}

/* Reservation item */
.reservation-item {
  background: var(--chip);
  padding: 1rem 1.1rem;
  border-radius: var(--radius-lg);
  border: 1px solid var(--line);
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: var(--space-3);
  transition: background-color .15s ease, border-color .15s ease, transform .12s ease;
}

.reservation-item:hover {
  background: #eef2f7;
  border-color: rgba(37, 99, 235, .28);
  transform: translateY(-1px);
}

.reservation-info {
  display: flex;
  flex-direction: column;
  gap: .3rem;
  min-width: 0;
}

.reservation-info strong {
  font-weight: 700;
  color: var(--ink);
  font-size: 1rem;
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}

.reservation-date   { font-size: .9rem; color: var(--ink-soft); }
.reservation-description {
  font-size: .9rem; color: var(--ink-soft);
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}

/* Selected reservation */
.selected-reservation-info {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: var(--space-3);
  margin-bottom: var(--space-4);
  padding-bottom: var(--space-3);
  border-bottom: 1px dashed var(--line);
  font-weight: 700;
  color: var(--ink);
  font-size: 1.05rem;
}

/* Forms */
.review-form { display: grid; gap: var(--space-4); }
.review-form label { font-weight: 700; color: var(--ink); }

.review-form input[type="number"],
.review-form textarea {
  font: inherit;
  font-weight: 600;
  color: var(--ink);
  background: var(--input-bg);
  border: 1.5px solid var(--input-border);
  border-radius: 14px;
  padding: .9rem 1rem;
  min-width: 0;
  transition: border-color .2s ease, box-shadow .2s ease, background-color .2s ease;
}

.review-form input[type="number"]:focus,
.review-form textarea:focus {
  outline: none;
  border-color: var(--input-border-focus);
  box-shadow: var(--ring);
  background: #f3f7ff;
}

.review-form input[type="number"] {
  max-width: 120px;
  text-align: center;
}

.review-form textarea {
  resize: vertical;
  min-height: 110px;
}

.review-form input[disabled],
.review-form textarea[disabled] {
  opacity: .6;
  cursor: not-allowed;
}

/* Submit */
.review-form button[type="submit"] {
  align-self: start;
  padding: .9rem 1.4rem;
}

/* ---------- Recent Reservations ---------- */
.recent-reservations {
  width: 100%;
  max-width: 900px;
}

.recent-reservations h3 {
  font-size: var(--h2);
  font-weight: 800;
  margin: 0 0 var(--space-3);
  color: var(--ink);
}

.recent-reservations ul {
  list-style: none;
  padding: 0; margin: 0;
  display: grid;
  gap: var(--space-3);
}

.recent-reservations li {
  background: var(--card);
  border: 1px solid var(--line);
  border-radius: var(--radius-lg);
  padding: .9rem 1.1rem;
  display: flex;
  align-items: center;
  gap: var(--space-3);
  font-weight: 600;
  color: var(--ink);
  box-shadow: var(--shadow-sm);
  transition: border-color .15s ease, transform .12s ease, box-shadow .2s ease;
}

.recent-reservations li:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-md);
  border-color: rgba(37, 99, 235, .22);
}

.recent-reservations strong {
  flex: 2 1 240px;
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
  color: var(--primary-800);
}

.recent-reservations span {
  flex: 1 1 140px;
  font-size: .95rem;
  color: var(--ink-soft);
}

.badge-reviewed {
  margin-left: auto;
  font-weight: 800;
  color: var(--success);
}

/* ---------- Modal ---------- */
.modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(2, 6, 23, 0.55);
  backdrop-filter: saturate(140%) blur(6px);
  display: grid;
  place-items: center;
  z-index: 1100;
}

.modal-content {
  background: var(--card);
  color: var(--ink);
  border: 1px solid var(--line);
  border-radius: var(--radius-xl);
  width: min(92vw, 680px);
  max-height: 84vh;
  overflow: auto;
  padding: var(--space-6);
  box-shadow: var(--shadow-lg);
}

.close-btn {
  position: absolute;
  top: .9rem; right: .9rem;
  width: 38px; height: 38px;
  border: 1px solid var(--line);
  background: var(--chip);
  border-radius: 999px;
  font-size: 1.1rem;
  font-weight: 700;
  color: var(--ink);
  cursor: pointer;
  display: grid; place-items: center;
  box-shadow: var(--shadow-sm);
  transition: transform .12s ease, background-color .15s ease, box-shadow .2s ease;
}
.close-btn:hover { transform: scale(1.05); box-shadow: var(--shadow-md); }

/* Modal list */
.modal-list { list-style: none; padding: 0; margin: 0; }
.modal-list li {
  padding: .85rem 0;
  border-bottom: 1px dashed var(--line);
  color: var(--ink-muted);
  line-height: 1.55;
}
.modal-list li:last-child { border-bottom: none; }

/* ---------- Reopen chat button ---------- */
.reopen-chat-btn {
  margin-top: .75rem;
}

/* ---------- Responsive ---------- */
@media (max-width: 1100px) {
  .card { grid-column: span 4; }
}
@media (max-width: 820px) {
  .client-summary { grid-template-columns: repeat(6, 1fr); }
  .card { grid-column: span 6; }
}
@media (max-width: 640px) {
  .client-dashboard { padding: var(--space-7) var(--space-2); gap: var(--space-6); }
  .client-header p { font-size: 1rem; }
  .review-section, .recent-reservations {
    background: transparent; border: none; box-shadow: none; padding: 0;
  }
  .reservation-item { padding: .85rem .9rem; align-items: start; }
  .reservation-description { white-space: normal; }
  .selected-reservation-info { flex-direction: column; align-items: flex-start; gap: .5rem; }
  .go-services-btn { width: 100%; }
}

/* ---------- Focus-visible fallback for browsers without it ---------- */
:focus { outline: none; }
:focus-visible { outline: none; }
